<!--
 * @Date: 2024-05-18 22:03:00
 * @LastEditors: zhangming 1051403128@qq.com
 * @LastEditTime: 2026-01-16 21:18:29
 * @FilePath: \leetcode-study\test.html
-->
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Document</title>
</head>

<body>
  <style>
    .container {
      display: flex;
      width: 300px;
      height: 200px;
      background-color: lightblue;
    }

    .item1 {
      background-color: lightcoral;
      flex: 1 0.2 0%;
    }

    .item2 {
      background-color: lightgreen;
      flex: 1;
    }
  </style>
  </head>

  <body>
    <div class="container">
      <div class="item1">item1</div>
      <div class="item2">item2</div>
    </div>
    <script>
      // 1. 消息中心（EventCenter）
      // 消息中心（EventCenter）将负责管理事件，包括注册订阅者（subscribers）和触发事件（publish events）。
      class EventCenter {
        constructor() {
          this.subscribers = []
        }
        // 订阅事件
        subscribe(event, callback) {
          if (!this.subscribers[event]) {
            this.subscribers[event] = []
          }
          this.subscribers[event].push(callback)
        }
        // 取消订阅
        unsubscribe(event, callback) {
          if (this.subscribers[event]) {
            this.subscribers[event] = this.subscribers[event].filter(v => v !== callback)
          }
        }
        // 发布事件
        publish(event, ...args) {
          if (this.subscribers[event]) {
            this.subscribers[event].forEach(callback => {
              callback(...args)
            });
          }
        }
      }
      // 创建消息中心实例  
      const eventCenter = new EventCenter();

      // 2. 订阅者（Subscribers）
      // 订阅者可以是任何对象或函数，它们将回调函数注册到消息中心以响应特定事件
      // 订阅者（用户）
      const user1 = {
        receiveNews: function (news) {
          console.log("用户1收到新闻:", news);
        },
      };

      const user2 = {
        receiveNews: function (news) {
          console.log("用户2收到新闻:", news);
        },
      };
      // 订阅科技新闻
      eventCenter.subscribe("tech", user1.receiveNews);
      eventCenter.subscribe("tech", user2.receiveNews);

      // 订阅娱乐新闻
      eventCenter.subscribe("entertainment", user1.receiveNews);

      // 发布科技新闻
      eventCenter.publish("entertainment", "最新的科技进展");


      /**
       * @param {string} homepage
       */
      var BrowserHistory = function (homepage) {
        this.history = new Array(homepage);
        this.current = 0;
      };

      /** 
       * @param {string} url
       * @return {void}
       */
      BrowserHistory.prototype.visit = function (url) {
        // 检查当前页面位置是不是历史最后一位
        if (this.history.length - 1 !== this.current) {
          this.history = this.history.slice(0, this.current + 1);
        }
        this.history.push(url);
        ++this.current;

        console.log(this.history);
      };

      /** 
       * @param {number} steps
       * @return {string}
       */
      BrowserHistory.prototype.back = function (steps) {
        let backIndex = this.current - steps;
        this.current = backIndex < 0 ? 0 : backIndex;

        console.log('this.history[this.current];: ', this.history[this.current]);
        return this.history[this.current];
      };

      /** 
       * @param {number} steps
       * @return {string}
       */
      BrowserHistory.prototype.forward = function (steps) {
        let forward = this.current + steps,
          end = this.history.length - 1;
        this.current = forward > end ? end : forward;

        console.log('this.history[this.current]: ', this.history[this.current]);
        return this.history[this.current]
      };

      /** 
       * Your BrowserHistory object will be instantiated and called as such:
       * var obj = new BrowserHistory(homepage)
       * obj.visit(url)
       * var param_2 = obj.back(steps)
       * var param_3 = obj.forward(steps)
       */
      const browserHistory = new BrowserHistory("leetcode.com");
      browserHistory.visit("google.com");
      browserHistory.visit("facebook.com");
      browserHistory.visit("youtube.com");
      browserHistory.back(1);
      browserHistory.back(1);
      browserHistory.forward(1);
      browserHistory.visit("linkedin.com");
      browserHistory.forward(2);
      browserHistory.back(2);
      browserHistory.back(7);

      const user = {
        name: "John",
        count: 30,
        getCount() {
          console.log('this: ', this);
          return this.count;
        }
      };
      const func = user.getCount;
      console.log(func()); // undefined
      console.log(func.call(user)); // 30
      console.log(func.apply(user)); // 30
    </script>
    <script>
      var longestConsecutive = function (nums) {
        nums = [...new Set(nums)].sort((a, b) => a - b)
        let res = 1;
        let l = 0;
        for (let i = 1; i < nums.lenght; i++) {
          if (nums[i] - nums[i - 1] === 1) {
            console.log(nums[i])
            res = Math.max(res, i - l + 1)
          } else {
            l = i;
          }
        }
        return res;
      };
      console.log(longestConsecutive([100, 4, 200, 1, 3, 2]));
      /**
       * @param {number[]} nums
       * @param {number} target
       * @return {number[][]}
       */
      /**
       * @param {number[]} nums
       * @param {number} target
       * @return {number[][]}
       */
      function fourSum(nums, target, n = 3) {
        nums.sort((a, b) => a - b); // 对数据进行排序
        /*
        注意：调用这个函数之前一定要先给 nums 排序
        n 填写想求的是几数之和，start 从哪个索引开始计算（一般填 0），target 填想凑出的目标和
        */
        const nSumTarget = (nums, n, start, target) => {
          let size = nums.length
          let res = []
          if (n < 2 || size < n) return res
          if (n === 2) {
            // 双指针那一套操作
            let l = start
            let r = size - 1
            while (l < r) {
              let left = nums[l]
              let right = nums[r]
              let sum = left + right
              if (sum < target) {
                while (l < r && nums[l] === left) l++
              } else if (sum > target) {
                while (l < r && nums[r] === right) r--
              } else {
                res.push([left, right])
                while (l < r && nums[l] === left) l++
                while (l < r && nums[r] === right) r--
              }
            }
          } else {
            // n > 2 时，递归计算 (n-1)Sum 的结果
            for (let i = start; i < size; i++) {
              let sub = nSumTarget(nums, n - 1, i + 1, target - nums[i]);
              // console.log('sub: ', sub);
              for (let arr of sub) {
                console.log('arr: ', arr);
                arr.push(nums[i])
                res.push(arr)
              }
              while (i < size - 1 && nums[i] === nums[i + 1]) i++
            }
          }
          return res
        }
        return nSumTarget(nums, n, 0, target)
      }
      console.log(fourSum([1,0,-1,0,-2,2], 0));
    </script>
  </body>

</html>